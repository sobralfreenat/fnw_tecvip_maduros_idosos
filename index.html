<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prot√≥tipo Wireframe - Home (Combinado)</title>
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html {
      font-size: 200%;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 1.125rem; /* 18px */
      line-height: 1.6;
      color: #111;
      background-color: #f5f5f5;
      padding-top: 60px;
    }

    /* Navigation */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 20px;
      position: fixed;
      top: 0;
      width: 100%;
      background: #fff;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      z-index: 100;
    }
    nav {
      max-width: 1500px;
      margin: 0 auto;
      display: flex;
      justify-content: space-around;
      padding: 12px 0;
    }
    nav a {
      color: #0070f3;
      text-decoration: none;
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }
    nav a:hover {
      text-decoration: underline;
    }

    /* Sections common */
    main {
      max-width: 1500px;
      margin: 0 auto;
      padding: 20px;
      position: relative; /* Establish stacking context */
    }
    section {
      margin-bottom: 60px;
    }
    h1, h2, h3 {
      color: #111;
      font-weight: 600;
      line-height: 1.2;
    }
    p {
      margin-top: 0.5rem;
    }
    button {
      background-color: #0070f3;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
    }
    button:hover {
      background-color: #005bb5;
    }

    /* Hero */
    #hero {
      padding-top: 40px;
    }
    #hero .hero-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 20px;
    }
    #hero .hero-content {
      flex: 0 0 40%;
      max-width: 400px;
      text-align: left;
    }
    #hero .hero-image {
      flex: 0 0 55%;
      min-width: 300px;
      text-align: center;
    }
    #hero .hero-image img {
      max-width: 100%;
      height: auto;
      border-radius: 6px;
      margin-top: 1rem;
    }
    #hero h1 {
      font-size: 2.125rem; /* 15% smaller than 2.5rem */
    }
    #hero p {
      font-size: 1.5rem;
      margin-top: 1rem;
    }

    /* Benefits */
    #benefits {
      text-align: center;
    }
    #benefits h2 {
      margin-bottom: 2rem;
      font-size: 2rem;
    }
    #benefits .cards-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }
    #benefits .card {
      background: #fff;
      padding: 1.5rem;
      margin: 0;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      flex: 0 0 calc(33.333% - 1rem);
      vertical-align: top;
      text-align: left;
    }
    #benefits .card h3 {
      font-size: 1.25rem;
    }
    #benefits .card p {
      margin-top: 0.5rem;
      font-size: 1rem;
    }

    /* Pricing */
    #pricing {
      text-align: center;
    }
    #pricing h2 {
      margin-bottom: 2rem;
      font-size: 2rem;
    }
    #pricing .plans-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: stretch;
    }
    #pricing .plan {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 1.5rem;
      margin: 0;
      flex: 0 0 calc(33.333% - 1rem);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      vertical-align: top;
      text-align: left;
    }
    #pricing .plan h3 {
      font-size: 1.5rem;
    }
    #pricing .plan p {
      margin-top: 1rem;
      font-size: 1.25rem;
    }
    #pricing .plan ul {
      text-align: left;
      margin-top: 0.75rem;
    }
    #pricing .plan ul li {
      margin-bottom: 0.5rem;
      font-size: 1rem;
    }

    /* CTA */
    #cta {
      text-align: center;
    }
    #cta h2 {
      font-size: 2rem;
    }
    #cta p {
      margin-top: 1rem;
      font-size: 1.125rem;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.875rem;
      color: #555;
      position: relative; /* Establish stacking context */
    }

    /* Mobile Menu Styles */
    .hamburger {
      display: none;
      position: absolute;
      top: 8px;
      right: 16px;
      width: 60px;
      height: auto;
      padding: 4px;
      flex-direction: column;
      background: none;
      border: none;
      cursor: pointer;
      z-index: 200;
    }
    .hamburger span {
      display: block;
      width: 100%;
      height: 6px;
      background-color: #0070f3;
      border-radius: 2px;
      margin-bottom: 9px;
    }
    .hamburger span:last-child {
      margin-bottom: 0;
    }

    /* Add hover effect */
    .hamburger:hover span {
      background-color: #aaaaaa;
    }
    #mobile-menu {
      position: fixed;
      top: 0;
      right: -260px;
      width: 260px;
      height: 100%;
      background-color: #fff;
      box-shadow: -2px 0 5px rgba(0,0,0,0.2);
      padding: 2rem 1rem;
      transition: right 0.3s ease;
      z-index: 150;
    }
    #mobile-menu.active {
      right: 0;
    }
    /* Responsive Mobile Overrides */
    @media (max-width: 768px) {
      header > nav {
        display: none;
      }
      .hamburger {
        display: flex;
      }
      /* Links inside mobile menu panel */
      #mobile-menu nav {
        display: block;
      }
      #mobile-menu nav a {
        display: block;
        padding: 0.75rem 0;
        color: #0070f3;
        text-decoration: none;
        border-bottom: 1px solid #eee;
      }
      #mobile-menu nav a:last-child {
        border-bottom: none;
      }
    }

    /* Responsive slider for cards */
    @media (max-width: 768px) {
      /* Horizontal slider for benefit & plan cards */
      #benefits .cards-container,
      #pricing .plans-container {
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
      }
      #benefits .cards-container::-webkit-scrollbar,
      #pricing .plans-container::-webkit-scrollbar {
        display: none;
      }
      #benefits .card,
      #pricing .plan {
        flex: 0 0 100%;
        scroll-snap-align: start;
        margin-right: 1rem;
      }
      /* Hero stacks on mobile */
      #hero .hero-container {
        flex-direction: column;
      }
      #hero .hero-content,
      #hero .hero-image {
        flex: 1 1 100%;
      }
    }

    /* Header Logo Style */
    .header-logo {
      height: 80px;
      width: auto;
      display: block;
      padding: 10px;
      margin-right: auto;
    }

    /* Floating WhatsApp Button Styles */
    #whatsapp-float {
      position: fixed;
      bottom: 0px;
      right: 20px;
      z-index: 102;  /* Above stripe and header */
      width: 100%; /* Make button wider */
      display: flex;
      align-items: center;
      justify-content: flex-end; /* Align items to the right */
      cursor: pointer;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    #whatsapp-float img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }

    #whatsapp-float span {
      font-size: 1rem;
      color: #111;
      font-weight: 600;
      margin: 0 10px;
    }

    /* Fixed bottom stripe */
    #bottom-stripe {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 10px;
      background-color: #333;
      z-index: 101;  /* Above header, below WhatsApp button */
    }

    /* Add a subtle hover effect */
    .hamburger:hover span {
      background-color: #aaaaaa;
    }

    /* Image Modal Styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed; /* Stay in place */
      z-index: 10000; /* Sit on top */
      padding-top: 60px; /* Location of the box */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0,0,0,0.85); /* Black w/ opacity */
      flex-direction: column; /* Arrange image and text vertically */
      justify-content: center; /* Center content vertically */
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 35px;
      color: #f1f1f1;
      font-size: 40px;
      font-weight: bold;
      transition: 0.3s;
      cursor: pointer;
    }

    .close-modal:hover,
    .close-modal:focus {
      color: #bbb;
      text-decoration: none;
    }

    .modal-content { /* Now the Icon Display Area <div> */
      /* Icon Styles */
      font-size: 10rem; /* Adjust size as needed */
      text-align: center;
      margin: 20px auto; /* Add some margin */
      color: #fff; /* White icon color */
      text-shadow: 0 0 8px #fff; /* Increased glow width */
      line-height: 1; /* Adjust line height for icon */
    }

    /* Modal Header Text Style */
    #modal-header-text {
      text-align: center;
      color: #fff; /* White text */
      font-size: 1.5rem; /* Adjust size as needed */
      font-weight: bold;
      margin-bottom: 10px; /* Space below header */
    }

    /* Caption Style */
    #modal-caption {
      margin: 15px auto; /* Space above/below */
      display: block;
      width: 80%;
      max-width: 700px; /* Limit caption width */
      text-align: center;
      color: #ccc; /* Light grey text color */
      padding: 10px 0;
      font-size: 1.2rem; /* Slightly larger font */
      line-height: 1.5;
    }

    /* Modal Carousel Buttons */
    .modal-carousel-button {
      position: absolute;
      top: 50%; /* Center vertically relative to modal content area potentially */
      transform: translateY(-50%);
      z-index: 10001; /* Above modal content */
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      padding: 12px 18px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 2rem;
      opacity: 0.7;
      transition: opacity 0.2s ease;
    }

    .modal-carousel-button:hover {
      opacity: 1;
    }

    .modal-prev {
      left: 20px; /* Position buttons */
    }

    .modal-next {
      right: 20px; /* Position buttons */
    }
  </style>
</head>
<body>
  <header>
    <img src="https://www.sie.com.br/admin/_upload/2021/10/23/29155/665e0803ea26e.png" alt="FNW Assessoria Digital Logo" class="header-logo">
    <button class="hamburger" id="hamburger">
      <span></span><span></span><span></span>
      <!-- <span class="hamburger-label">Menu</span> -->
    </button>
    <nav>
      <a href="#">In√≠cio</a>
      <a href="#benefits">Benef√≠cios</a>
      <a href="#pricing">Planos</a>
      <a href="#cta">Contato</a>
      <a href="https://sobralfreenat.github.io/fnw_curadoria_sie/" class="content-popup-link">Conte√∫do</a>
    </nav>
    <div id="mobile-menu">
      <nav>
        <a href="#">In√≠cio</a>
        <a href="#benefits">Benef√≠cios</a>
        <a href="#pricing">Planos</a>
        <a href="#cta">Contato</a>
        <a href="https://sobralfreenat.github.io/fnw_curadoria_sie/" class="content-popup-link">Conte√∫do</a>
      </nav>
    </div>
  </header>
<br><br>
  <main>
    <section id="hero">
      <div class="hero-container">
        <div class="hero-content">
          <h1>Sofrendo com tecnologia?</h1>
          <p>Suporte especializado<br>sob medida para pessoas maduras e idosos.</p>
          <button id="hero-cta-button">Comece Agora</button>
        </div>
        <div class="hero-image">
          <!-- Single image to trigger modal -->
          <img src="https://d1yei2z3i6k35z.cloudfront.net/3119789/681d74f829af2_ImagemAle_Elieu_Maduros_Idosos.png" 
               alt="Suporte Tecnol√≥gico para Idosos" 
               id="hero-image-trigger" 
               style="cursor: pointer; max-width: 100%; height: auto; border-radius: 6px;"> 
        </div>
      </div>
    </section>
    <br><br><br>
    <section id="benefits">
      <h2>Por que escolher nosso servi√ßo?</h2>
      <div class="cards-container">
        <div class="card">
          <h3>Suporte<br> Dedicado</h3>
          <p>Atendimento VIP com especialistas experientes em bem estar e
          educa√ß√£o digital.</p>
        </div>
        <div class="card">
          <h3>Conte√∫dos Diversificados</h3>
          <p>V√≠deos instrutivos e recursos interativos para estimulo cognitivo cont√≠nuo.</p>
        </div>
        <div class="card">
          <h3>Acesso Familiar</h3>
          <p>Acesso Compartilhado em corstesia e incentivo para at√© 4 familiares cadastrados.</p>
        </div>
      </div>
    </section>
<br><br><br>   
    <section id="pricing">
      <h2>Escolha o Plano Ideal para Voc√™</h2>
      <div class="plans-container">
        <div class="plan">
          <h3>Semanal</h3>
          <p><strong>R$ 600/ m√™s</strong></p>
          <ul>
            <li>1 atendimento por semana</li>
            <li>Disponibilidade de 3 horas</li>
            <li>Acesso: +4 familiares cadastrados</li>
          </ul>
          <button class="plan-button" data-plan-name="Semanal">Escolher Plano</button>
        </div>
        <div class="plan">
          <h3>Quinzenal</h3>
          <p><strong>R$ 400/ m√™s</strong></p>
          <ul>
            <li>1 atendimento a cada 15 dias</li>
            <li>Disponibildade de 2h30</li>
            <li>Acesso: +3 familiares cadastrados</li>
          </ul>
          <button class="plan-button" data-plan-name="Quinzenal">Escolher Plano</button>
        </div>
        <div class="plan">
          <h3>21 Dias</h3>
          <p><strong>R$ 300/ m√™s</strong></p>
          <ul>
            <li>1 atendimento a cada 21 dias</li>
            <li>Disponibildade de 2 horas</li>
            <li>Acesso: +2 familiares cadastrados</li>
          </ul>
          <button class="plan-button" data-plan-name="21 Dias">Escolher Plano</button>
        </div>
      </div>
    </section>
    <br><br><br>
    <section id="cta">
      <h2>Pronto para Aliviar sua Jornada Digital?</h2>
      <p>Junte-se a milhares de pessoas que j√° descobriram como simplificar o uso de tecnologia.</p>
      <button id="cta-contact-button">Entre em Contato</button>
    </section>
  </main>
  <br><br><br>
  <footer>
    <p>&copy; 2025 FNW Assessoria Digital</p>
  </footer><br><br><br>

  <!-- Floating WhatsApp Button -->
  <div id="whatsapp-float">
    <img src="https://d1yei2z3i6k35z.cloudfront.net/3119789/6621e93e3f3ae_FNWfreenatstoreLogodownload.jpg" alt="Logo">
    <span>Fale Conosco</span>
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
  </div>

  <!-- Bottom Stripe -->
  <div id="bottom-stripe"></div>

  <!-- Image Modal (Recreated) -->
  <div id="image-modal" class="modal">
    <span class="close-modal" id="close-image-modal" aria-label="Fechar Modal">&times;</span>
    <!-- Modal Carousel Navigation -->
    <button class="modal-carousel-button modal-prev" id="modal-prev" aria-label="Anterior">&#10094;</button>
    <button class="modal-carousel-button modal-next" id="modal-next" aria-label="Pr√≥ximo">&#10095;</button>
    <!-- Modal Content Area -->
    <h2 id="modal-header-text"></h2>
    <div class="modal-content" id="modal-icon-display"></div> <!-- Icon Display Area -->
    <div id="modal-caption"></div> <!-- Caption/Text Area -->
    <div id="modal-button-area" style="text-align: center; display: none; margin-top: 20px;"></div> <!-- Placeholder for the 'Vamos Juntos' button -->
    <div id="modal-choice-area" style="text-align: center; display: none; margin-top: 20px; background: #fff; padding: 30px 40px; border-radius: 8px; max-width: 90%; width: 400px; margin-left: auto; margin-right: auto;">
        <h3 style="margin-bottom: 25px; color: #111; font-size: 1.3rem;">O que voc√™ gostaria de ver?</h3>
        <button id="choice-plan-button" style="display: block; width: 100%; margin-bottom: 15px;">Escolher Plano</button>
        <button id="choice-content-button" style="display: block; width: 100%;">Conte√∫do</button>
    </div> <!-- Area for Plan/Content choice -->
    <iframe id="modal-iframe" style="display: none; width: 100%; height: 80vh; border: none; margin-top: 10px;"></iframe> <!-- iframe placeholder -->
  </div>

  <script>
    // Smooth scrolling for navigation links
    (function() {
      'use strict';
      document.addEventListener('DOMContentLoaded', function() {
        // Select links from both desktop and mobile navs
        var links = document.querySelectorAll('header nav a[href^="#"], #mobile-menu nav a[href^="#"]');
        links.forEach(function(link) {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            var href = this.getAttribute('href');

            if (href === '#') {
              // Scroll to top if href is exactly '#'
              window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
              // Original logic for other #hash links
              var targetId = href.slice(1);
              var targetEl = document.getElementById(targetId);
              if (targetEl) {
                targetEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
              }
            }
            // Close mobile menu if open and a link is clicked
            var mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('active')) {
              mobileMenu.classList.remove('active');
            }
          });
        });
      });
    })();

    // Mobile menu toggle
    (function() {
      var hamburger = document.getElementById('hamburger');
      var mobileMenu = document.getElementById('mobile-menu');
      if(hamburger && mobileMenu){
          hamburger.addEventListener('click', function() {
            mobileMenu.classList.toggle('active');
          });
      }
    })();

    // WhatsApp link in mobile menu click handler (Link was removed, but keep handler just in case)
    (function() {
      var whatsappLink = document.getElementById('whatsapp-menu-link');
      var phoneNumber = '5511911595028'; // Your WhatsApp number

      if (whatsappLink) {
        whatsappLink.addEventListener('click', function(e) {
          e.preventDefault(); // Prevent default anchor behavior

          // Construct the message
          var message = "Ol√°! Visitei a p√°gina da FNWl (contato via menu) e gostaria de tirar d√∫vidas sobre o suporte de tecnologia a pessoas maduras ou idosas, que ainda tem muita \"lenha para queimar\"!";
          var encodedMessage = encodeURIComponent(message);
          var whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;

          // Open WhatsApp in a new window/tab
          var width = 400;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          window.open(whatsappUrl, 'whatsappWindow', `width=${width},height=${height},top=${top},left=${left}`);

          // Optionally close the menu after clicking
          var mobileMenu = document.getElementById('mobile-menu');
          if (mobileMenu && mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
          }
        });
      }
    })();

    // CTA button opens WhatsApp after confirmation
    (function() {
      var ctaButton = document.getElementById('cta-contact-button');
      var phoneNumber = '5511911595028'; // Your WhatsApp number

      if (ctaButton) {
        ctaButton.addEventListener('click', function(e) {
          e.preventDefault(); // Prevent default button action

          // Specific message for this button
          var message = "Ol√°! Visitei a p√°gina da FNWl e gostaria de tirar d√∫vidas sobre o suporte de tecnologia a pessoas maduras ou idosas, que ainda tem muita \"lenha para queimar\"!";
          var confirmationMessage = "Deseja iniciar a conversa no WhatsApp?";

          // Show confirmation dialog
          if (window.confirm(confirmationMessage)) {
            // User confirmed, open WhatsApp
            var encodedMessage = encodeURIComponent(message);
            var whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;

            // Open WhatsApp in a new window/tab
            var width = 400;
            var height = 600;
            var left = (screen.width - width) / 2;
            var top = (screen.height - height) / 2;
            window.open(whatsappUrl, 'whatsappWindow', `width=${width},height=${height},top=${top},left=${left}`);
          } else {
            // User canceled
            console.log('User canceled WhatsApp from CTA button.');
          }
        });
      }
    })();

    // Hero CTA button smooth scroll to benefits
    (function() {
      var heroButton = document.getElementById('hero-cta-button');
      var benefitsSection = document.getElementById('benefits');

      if (heroButton && benefitsSection) {
        heroButton.addEventListener('click', function(e) {
          e.preventDefault(); // Prevent default if it's inside a form, etc.

          // Calculate position with offset
          var elementPosition = benefitsSection.getBoundingClientRect().top;
          var offsetPosition = elementPosition + window.pageYOffset - 100; // Subtract 100px offset

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        });
      }
    })();

    // WhatsApp float button click handler
    (function() {
      var whatsappButton = document.getElementById('whatsapp-float');
      var phoneNumber = '5511911595028'; // Your WhatsApp number (repeat for safety or define globally)
      if (whatsappButton) {
        whatsappButton.onclick = function() {
           // Construct the message
          var message = "Ol√°! Visitei o site da FNW Assessoria Digital e gostaria de entrar em contato.";
          var encodedMessage = encodeURIComponent(message);
          var whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;

          var width = 400;
          var height = 600;
          var left = (screen.width - width) / 2;
          var top = (screen.height - height) / 2;
          // Corrected the window.open call here
          window.open(whatsappUrl, 'whatsappWindow', `width=${width},height=${height},top=${top},left=${left}`);
        };
      }
    })();

    // Pricing plan buttons - confirm and open WhatsApp
    (function() {
      var planButtons = document.querySelectorAll('.plan-button');
      var phoneNumber = '5511911595028'; // Your WhatsApp number

      planButtons.forEach(function(button) {
        button.addEventListener('click', function(e) {
          e.preventDefault();

          // Find the parent .plan container for this button
          var planElement = this.closest('.plan');
          if (!planElement) return; // Safety check

          // Extract details from the plan element
          var planName = this.getAttribute('data-plan-name');
          var priceElement = planElement.querySelector('p > strong');
          var price = priceElement ? priceElement.textContent : ''; // Get price, default to empty string
          var featureElements = planElement.querySelectorAll('ul li');
          var features = []; // Although not used in confirm message, keep for potential future use
          featureElements.forEach(function(li) {
            features.push("- " + li.textContent.trim());
          });

          // Use the detailed message format for all plans
          var message = `Ol√°! Visitei a p√°gina da FNWl e gostaria de mais informa√ß√µes sobre o Plano ${planName} para suporte de tecnologia a pessoas maduras ou idosas, que ainda tem muita "lenha para queimar"!`;

          // Simpler confirmation message with price and action instruction
          var confirmationMessage = `Voc√™ escolheu o Plano ${planName} (${price.trim()}).\n\nClique OK para prosseguir ou Cancelar para voltar.`;

          // Show confirmation dialog
          if (window.confirm(confirmationMessage)) {
            // User confirmed, open WhatsApp
            var encodedMessage = encodeURIComponent(message);
            var whatsappUrl = `https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`;

            // Open WhatsApp in a new window/tab
            var width = 400;
            var height = 600;
            var left = (screen.width - width) / 2;
            var top = (screen.height - height) / 2;
            window.open(whatsappUrl, 'whatsappWindow', `width=${width},height=${height},top=${top},left=${left}`);
          } else {
            // User canceled, do nothing
            console.log('User canceled WhatsApp for Plan:', planName);
          }
        });
      });
    })();

    // Content link popup handler (with confirmation)
    (function() {
      var contentLinks = document.querySelectorAll('.content-popup-link'); // Use the restored class
      contentLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
          e.preventDefault(); // Stop default link behavior

          // Confirmation message
          var confirmationMessage = "Escolha a categorias e conteudos a seguir.";

          if (window.confirm(confirmationMessage)) {
            // User confirmed, open the base content page URL
            var url = this.getAttribute('href'); // Get the base URL from the link


            // Define popup window features
            var width = 400;
            var height = 700;
            var left = screen.width - width; // Align to the right edge
            var top = (screen.height - height) / 2;
            var features = `width=${width},height=${height},top=${top},left=${left},scrollbars=yes,resizable=yes`;

            // Open the base URL in the popup
            window.open(url, 'contentWindow', features);

            // Optionally close mobile menu if it was open
            var mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('active')) {
              mobileMenu.classList.remove('active');
            }
          } else {
            // User cancelled
            console.log('Content popup cancelled.');
            // Still close mobile menu if the click originated there
            var mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('active')) {
              mobileMenu.classList.remove('active');
            }
          }
        });
      });
    })();

    // Image Modal Logic with Carousel and Choice Step
    (function() {
      const modal = document.getElementById('image-modal');
      const iconDisplay = document.getElementById('modal-icon-display');
      const captionText = document.getElementById('modal-caption');
      const modalHeaderText = document.getElementById('modal-header-text');
      const modalButtonArea = document.getElementById('modal-button-area');
      const modalChoiceArea = document.getElementById('modal-choice-area'); // New choice area
      const modalIframe = document.getElementById('modal-iframe');
      const closeModalBtn = document.getElementById('close-image-modal');
      const modalPrevBtn = document.getElementById('modal-prev');
      const modalNextBtn = document.getElementById('modal-next');
      const heroImageTrigger = document.getElementById('hero-image-trigger');
      const choicePlanButton = document.getElementById('choice-plan-button'); // Button in choice area
      const choiceContentButton = document.getElementById('choice-content-button'); // Button in choice area
      const pricingSection = document.getElementById('pricing');

      // Define the image data (using icons now)
      const imageData = [
        {
          header: "LEMBRE-SE:",
          icon: "üí°",
          text: "Cada passo na tecnologia √© uma nova descoberta!"
        },
        {
          header: "APRENDER:",
          icon: "üéì",
          text: "Mant√©m a mente ativa!"
        },
        {
          header: "EXERCITE:",
          icon: "üß†",
          text: "Sua cogni√ß√£o conosco!"
        },
        {
          type: "button",
          buttonText: "Vamos juntos!"
        }
      ];

      let currentImageIndex = 0;
      const totalImages = imageData.length;

      // Basic check for core elements
      if (!modal || !heroImageTrigger || !closeModalBtn) return;

      // Function to open modal
      function openModal(index) {
        currentImageIndex = index;
        updateModalContent(); // Update content first
        // Ensure choice area and iframe are hidden initially
        if (modalChoiceArea) modalChoiceArea.style.display = 'none';
        if (modalIframe) {
            modalIframe.style.display = 'none';
            modalIframe.src = '';
        }
        // Make sure nav buttons are visible initially (if needed)
        toggleModalNavButtons();
        modal.style.display = "flex";
      }

      // Function to close modal
      function closeModalFunction() {
        if (modalIframe) {
            modalIframe.style.display = 'none';
            modalIframe.src = '';
        }
        modal.style.display = "none";
      }

      // Function to update modal content based on index
      function updateModalContent() {
         const currentData = imageData[currentImageIndex];

         // Hide everything initially inside the modal update cycle
         if (modalHeaderText) modalHeaderText.style.display = 'none';
         if (iconDisplay) iconDisplay.style.display = 'none';
         if (captionText) captionText.style.display = 'none';
         if (modalButtonArea) modalButtonArea.style.display = 'none';
         if (modalChoiceArea) modalChoiceArea.style.display = 'none';
         if (modalIframe) modalIframe.style.display = 'none';
         if (modalPrevBtn) modalPrevBtn.style.display = 'block'; // Assume nav buttons visible unless hidden later
         if (modalNextBtn) modalNextBtn.style.display = 'block';

         if (currentData.type === 'button') {
             // --- Fourth Slide: Show "Vamos Juntos!" button --- 
             if (modalButtonArea) {
                 modalButtonArea.innerHTML = ''; // Clear previous button
                 const vamosJuntosButton = document.createElement('button');
                 vamosJuntosButton.textContent = currentData.buttonText;
                 // Add styling
                 vamosJuntosButton.style.backgroundColor = '#0070f3';
                 vamosJuntosButton.style.color = '#fff';
                 vamosJuntosButton.style.border = 'none';
                 vamosJuntosButton.style.borderRadius = '4px';
                 vamosJuntosButton.style.padding = '0.75rem 1.5rem';
                 vamosJuntosButton.style.fontSize = '1rem';
                 vamosJuntosButton.style.cursor = 'pointer';

                 // Add listener to show the CHOICE AREA
                 vamosJuntosButton.addEventListener('click', function() {
                     if (modalButtonArea) modalButtonArea.style.display = 'none';
                     if (modalChoiceArea) modalChoiceArea.style.display = 'block';
                     if (modalPrevBtn) modalPrevBtn.style.display = 'none'; // Hide nav when showing choices
                     if (modalNextBtn) modalNextBtn.style.display = 'none';
                 });

                 modalButtonArea.appendChild(vamosJuntosButton);
                 modalButtonArea.style.display = 'block';
             }
         } else {
             // --- Slides 1-3: Show Header, Icon, Text --- 
             if (modalHeaderText) {
                modalHeaderText.textContent = currentData.header || '';
                modalHeaderText.style.display = 'block';
             }
             if (iconDisplay) {
                iconDisplay.textContent = currentData.icon || '';
                iconDisplay.style.display = 'block';
             }
             if (captionText) {
                captionText.textContent = currentData.text || '';
                captionText.style.display = 'block';
             }
         }
         // Re-evaluate nav buttons visibility based on index (might be redundant if done inside cases)
         toggleModalNavButtons();
      }

      // Function to show/hide modal nav buttons based on index
      function toggleModalNavButtons() {
         if (!modalPrevBtn || !modalNextBtn) return;
         // Hide prev on first slide, next on last slide (button slide)
         modalPrevBtn.style.display = (currentImageIndex === 0) ? 'none' : 'block';
         modalNextBtn.style.display = (currentImageIndex === totalImages - 1) ? 'none' : 'block';
      }

      // Trigger: Hero Image Click
      heroImageTrigger.addEventListener('click', function() {
         openModal(0); // Open modal starting with the first image
      });

      // Close Button
      closeModalBtn.addEventListener('click', closeModalFunction);

      // Modal Background Click
      modal.addEventListener('click', function(event) {
        if (event.target === modal) {
          closeModalFunction();
        }
      });

      // --- Listeners for the CHOICE AREA buttons ---
      if (choicePlanButton && pricingSection) {
         choicePlanButton.addEventListener('click', function() {
          // Smooth scroll to pricing section with offset
          var elementPosition = pricingSection.getBoundingClientRect().top;
          var offsetPosition = elementPosition + window.pageYOffset - 100; // Adjust offset if needed
          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
          closeModalFunction(); // Close modal after action
         });
      }

      if (choiceContentButton && modalIframe) {
         choiceContentButton.addEventListener('click', function() {
          const iframeUrl = 'https://sobralfreenat.github.io/fnw_curadoria_sie/';
          // Hide choice area, show iframe
          if (modalChoiceArea) modalChoiceArea.style.display = 'none';
          modalIframe.src = iframeUrl;
          modalIframe.style.display = 'block';
          // Keep modal open, but user can close with 'X'
         });
      }

      // --- Listeners for Carousel Navigation --- 
      if (modalNextBtn) {
         modalNextBtn.addEventListener('click', () => {
          currentImageIndex = (currentImageIndex + 1) % totalImages;
          updateModalContent();
         });
      }

      if (modalPrevBtn) {
         modalPrevBtn.addEventListener('click', () => {
          currentImageIndex = (currentImageIndex - 1 + totalImages) % totalImages;
          updateModalContent();
         });
      }
    })();

  </script>
</body>
</html>
